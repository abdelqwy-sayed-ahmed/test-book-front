(this.webpackJsonpnewroute=this.webpackJsonpnewroute||[]).push([[0],{221:function(e,t,a){"use strict";a.r(t);var c=a(0),r=a(1),n=a.n(r),s=a(87),i=a.n(s),l=(a(98),a(56)),o=a(9),j=a(2),d=a.n(j),b=a(5),u=a(4),m=a(3),h=a(11),O=a(27),p=a(6),x=n.a.createContext();x.displayName=x;var f=x;function v(){var e=Object(r.useContext)(f).handleSearch;return Object(c.jsx)(n.a.Fragment,{children:Object(c.jsx)("input",{type:"text",onChange:function(t){return e(t.target.value)},className:"form-control me-2",placeholder:"Seach for Book...",name:"query"})})}function g(){var e=Object(r.useContext)(f),t=e.getCartTotal;return Object(c.jsx)("div",{children:Object(c.jsx)("nav",{className:"navbar navbar fixed-top navbar-expand-lg navbar-dark bg-dark",children:Object(c.jsxs)("div",{className:"container ",children:[Object(c.jsx)(p.b,{className:"navbar-brand",to:"/",children:Object(c.jsx)("i",{className:"fa fa-book fa-lg"})}),Object(c.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(c.jsx)("span",{className:"navbar-toggler-icon"})}),Object(c.jsxs)("div",{className:" collapse navbar-collapse collapse-hide",id:"navbarSupportedContent",children:[Object(c.jsxs)("ul",{className:"navbar-nav me-auto mb-2 mb-lg-0","aria-labelledby":"navbarSupportedContent",children:[!e.user&&Object(c.jsx)(n.a.Fragment,{children:Object(c.jsx)("li",{className:"nav-item",children:Object(c.jsx)(p.b,{className:"nav-link",to:"/login",children:Object(c.jsx)("i",{className:"fa fa-user fa-2x text-primary"})})})}),e.user.isAdmin&&Object(c.jsx)(n.a.Fragment,{children:Object(c.jsxs)("li",{className:"nav-item dropdown",children:[Object(c.jsx)("button",{className:"btn btn-dark nav-link dropdown-toggle",id:"navbarDropdown","data-bs-toggle":"dropdown","aria-expanded":"false",children:"DashBoard"}),Object(c.jsxs)("ul",{className:"dropdown-menu bg-dark ","aria-labelledby":"navbarDropdown",children:[Object(c.jsx)("li",{className:"nav-item",children:Object(c.jsx)(p.b,{className:"nav-link mr-2",to:"/genre/add",role:"button","data-toggle":"collapse",children:"Add Genre"})}),Object(c.jsx)("li",{className:"nav-item",children:Object(c.jsx)(p.b,{className:"nav-link mr-2",to:"/books/add",children:"AddBook"})}),Object(c.jsx)("li",{className:"nav-item",children:Object(c.jsx)(p.b,{className:"nav-link mr-2",to:"/booklists",children:"Book lists"})})]})]})}),e.user&&Object(c.jsxs)(n.a.Fragment,{children:[Object(c.jsx)("li",{className:"nav-item",children:Object(c.jsx)(p.b,{className:"nav-link",to:"/profile",children:e.user.name})}),Object(c.jsx)("li",{className:"nav-item",children:Object(c.jsx)(p.b,{to:"/logout",className:"nav-link",role:"button","data-toggle":"collapse",children:"Logout"})})]})]}),Object(c.jsx)("form",{className:"d-flex mr-2",onSubmit:function(e){e.preventDefault()},children:Object(c.jsx)(v,{})}),Object(c.jsx)("ul",{className:"navbar-nav my-auto mb-2 mb-lg-0",children:Object(c.jsx)("li",{className:"nav-item",children:Object(c.jsxs)(p.b,{className:"nav-link",to:"/cart",children:[Object(c.jsx)("i",{className:"fa fa-shopping-cart fa-2x text-primary"}),Object(c.jsx)("span",{className:"badge rounded-pill bg-success",children:t()})]})})})]})]})})})}var N=a(7),k=a(8),w=a(10),y=a.n(w),S=a(20),C=a.n(S);C.a.defaults.headers.common["x-auth-token"]=localStorage.getItem("token"),C.a.interceptors.response.use(null,(function(e){return e.response&&e.response.status>=400&&e.response.status<500||console.log("An unexpected Error",e),Promise.reject(e)}));var T={get:C.a.get,post:C.a.post,put:C.a.put,delete:C.a.delete},I=a(89),F=a.n(I),_=function(){var e=Object(h.g)(),t=function(){var t=Object(u.a)(d.a.mark((function t(a){var c,r,n,s;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T.post("https://book-shop-2021.herokuapp.com/users/facebook",a);case 2:c=t.sent,r=c.data,localStorage.setItem("token",r),n=Object(O.a)(r),localStorage.setItem("uId",n._id),s=e.state,window.location=s?s.from.pathname:"/";case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(c.jsx)("div",{children:Object(c.jsx)(F.a,{appId:"865248894308326",autoLoad:!1,fields:"name,email,picture.type(large)",callback:t,render:function(e){return Object(c.jsxs)("button",{className:"btn btn-primary",onClick:e.onClick,children:[Object(c.jsx)("i",{className:"fa fa-facebook"})," login with facebook account"]})}})})};function E(){var e=Object(r.useContext)(f),t=Object(r.useState)({email:"",password:""}),a=Object(m.a)(t,2),n=a[0],s=a[1],i=Object(r.useState)({}),l=Object(m.a)(i,2),j=l[0],b=l[1],x=Object(r.useState)(""),v=Object(m.a)(x,2),g=v[0],w=v[1],S=Object(h.g)(),C={email:y.a.string().required().email().label("Email"),password:y.a.string().required().label("Password")},I=function(){var e=y.a.validate(n,C,{abortEarly:!1}).error;if(!e)return null;var t,a={},c=Object(k.a)(e.details);try{for(c.s();!(t=c.n()).done;){var r=t.value;a[r.path[0]]=r.message}}catch(s){c.e(s)}finally{c.f()}return a},F=function(e){var t=e.currentTarget,a=Object(o.a)({},j),c=function(e){var t=e.name,a=e.value,c=Object(N.a)({},t,a);C=Object(N.a)({},t,C[t]);var r=y.a.validate(c,C).error;return r?r.details[0].message:null}(t);c?a[t.name]=c:delete a[t.name],b(a);var r=t.name,i=t.value;s(Object(o.a)(Object(o.a)({},n),{},Object(N.a)({},r,i)))},E=function(){var e=Object(u.a)(d.a.mark((function e(t){var a,c,r,n,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=I(),b(a||{}),!a){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,T.post("https://book-shop-2021.herokuapp.com/users/login",t);case 7:c=e.sent,r=c.data,localStorage.setItem("token",r),n=Object(O.a)(r),localStorage.setItem("uId",n._id),s=S.state,window.location=s?s.from.pathname:"/",e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),e.t0.response&&400===e.t0.response.status&&w(e.t0.response.data);case 19:case"end":return e.stop()}}),e,null,[[4,16]])})));return function(t){return e.apply(this,arguments)}}(),P=function(e,t,a,r){return Object(c.jsxs)("div",{className:"form-group mb-2",children:[Object(c.jsx)("label",{htmlFor:t,children:a}),Object(c.jsx)("input",{type:e,name:t,value:r,className:"form-control mt-2",onChange:F}),j[t]&&Object(c.jsx)("p",{className:"text-danger",children:j[t]})]})};return e.user&&(window.location="/"),Object(c.jsx)("div",{className:"row mt-5",children:Object(c.jsx)("div",{className:"col-md-6 mx-auto",children:Object(c.jsxs)("div",{className:"card card-body",children:[g&&Object(c.jsx)("div",{className:"alert alert-danger",children:g}),Object(c.jsx)("h2",{className:"text-center text-primary",children:"Login Form"}),Object(c.jsxs)("form",{onSubmit:function(e){e.preventDefault(),E(n)},children:[P("text","email","Email",n.email),P("password","password","Password",n.password),Object(c.jsx)("button",{className:"btn btn-primary ",disabled:I(),children:"Login"}),Object(c.jsxs)("div",{className:"d-flex align-items-center mt-2",children:[Object(c.jsx)("div",{children:Object(c.jsx)(p.b,{to:"/forget",children:"Forget your password"})}),Object(c.jsx)("div",{className:"ms-auto",children:Object(c.jsx)(p.b,{to:"/register",children:"Create new account"})})]})]}),Object(c.jsx)("div",{className:"text-center mt-2",children:Object(c.jsx)(_,{})})]})})})}function P(){var e=Object(r.useState)(!1),t=Object(m.a)(e,2),a=t[0],n=t[1],s=Object(r.useState)({name:"",email:"",password:""}),i=Object(m.a)(s,2),l=i[0],j=i[1],b=Object(r.useState)({}),h=Object(m.a)(b,2),O=h[0],x=h[1],f=Object(r.useState)(""),v=Object(m.a)(f,2),g=v[0],w=v[1],S=Object(r.useState)(""),C=Object(m.a)(S,2),I=C[0],F=C[1],_={name:y.a.string().required().label("Name"),email:y.a.string().required().email().label("Email"),password:y.a.string().required().min(6).label("Password")},E=function(){var e=y.a.validate(l,_,{abortEarly:!1}).error;if(!e)return null;var t,a={},c=Object(k.a)(e.details);try{for(c.s();!(t=c.n()).done;){var r=t.value;a[r.path[0]]=r.message}}catch(n){c.e(n)}finally{c.f()}return a},P=function(e){var t=e.currentTarget,a=Object(o.a)({},O),c=function(e){var t=e.name,a=e.value,c=Object(N.a)({},t,a);_=Object(N.a)({},t,_[t]);var r=y.a.validate(c,_).error;return r?r.details[0].message:null}(t);c?a[t.name]=c:delete a[t.name],x(a);var r=t.name,n=t.value;j(Object(o.a)(Object(o.a)({},l),{},Object(N.a)({},r,n)))},q=function(){var e=Object(u.a)(d.a.mark((function e(t){var a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=E(),x(a||{}),!a){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,n(!0),e.next=8,T.post("https://book-shop-2021.herokuapp.com/users/register",t);case 8:(c=e.sent)&&200===c.status&&(w(c.data),setTimeout((function(){window.location="/login"}),2e3)),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(4),n(!1),e.t0.response&&400===e.t0.response.status&&F(e.t0.response.data);case 16:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t){return e.apply(this,arguments)}}(),D=function(e,t,a,r){return Object(c.jsxs)("div",{className:"form-group mb-2",children:[Object(c.jsx)("label",{htmlFor:t,children:a}),Object(c.jsx)("input",{type:e,name:t,value:r,className:"form-control mt-2",onChange:P}),O[t]&&Object(c.jsx)("p",{className:"text-danger",children:O[t]})]})};return Object(c.jsx)("div",{className:"row mt-5",children:Object(c.jsx)("div",{className:"col-md-6 mx-auto",children:Object(c.jsxs)("div",{className:"card card-body",children:[g&&Object(c.jsx)("div",{className:"alert alert-success",children:g}),I&&Object(c.jsx)("div",{className:"alert alert-danger",children:I}),Object(c.jsx)("h2",{className:"text-center text-primary",children:"Register Form"}),Object(c.jsxs)("form",{onSubmit:function(e){e.preventDefault(),q(l)},children:[D("text","name","Name",l.name),D("text","email","Email",l.email),D("password","password","Password",l.password),Object(c.jsxs)("button",{className:"btn btn-primary",disabled:a||E(),children:[a&&Object(c.jsx)("i",{className:"fa fa-refresh fa-spin"}),"Submit"]}),Object(c.jsx)("div",{className:"mt-2",children:Object(c.jsx)(p.b,{to:"/login",children:" Already have an account please login"})})]})]})})})}var q=a(54),D=a.n(q);function L(){var e=Object(r.useContext)(f),t=e.filtering.length,a=e.pageSize,s=e.currentPage,i=e.onPageChange,l=Math.ceil(t/a);if(1===l)return null;var o=D.a.range(1,l+1);return Object(c.jsx)(n.a.Fragment,{children:Object(c.jsx)("nav",{"aria-label":"Page navigation example",children:Object(c.jsx)("ul",{className:"pagination",children:o.map((function(e){return Object(c.jsx)("li",{className:e===s?"page-item active":"page-item",children:Object(c.jsx)("button",{className:"page-link",onClick:function(){return i(e)},children:e})},e)}))})})})}function A(e,t,a){var c=(t-1)*a;return D()(e).slice(c).take(a).value()}var B=function(){var e=Object(r.useContext)(f),t=e.genres,a=e.handleGenreSelect,s=e.selectedGenre;return Object(c.jsx)(n.a.Fragment,{children:Object(c.jsx)("ul",{className:"list-group text-center",children:t.map((function(e){return Object(c.jsx)("li",{className:e===s?"list-group-item active":"list-group-item",style:{cursor:"pointer"},onClick:function(){return a(e)},children:e.title},e._id)}))})})},R=function(){var e=Object(r.useContext)(f),t=e.pageSize,a=e.currentPage,s=A(e.filtering,a,t);return Object(c.jsxs)(n.a.Fragment,{children:[0===s.length&&Object(c.jsx)("h3",{className:"text-center text-danger",children:"Sorry no much results found"}),Object(c.jsx)("div",{className:"row text-center",children:s.map((function(e){return Object(c.jsx)("div",{className:"col-md-4",children:Object(c.jsx)("div",{className:"card card-body mt-2 border-white",style:{height:"250"},children:Object(c.jsx)(p.b,{to:"/books/".concat(e.title.replace(/\s+/g,"-").toLowerCase(),"/").concat(e._id),children:Object(c.jsx)("img",{src:"https://book-shop-2021.herokuapp.com"+"/".concat(e.image),alt:e.title,height:"200",width:"200",style:{cursor:"pointer"}})})})},e._id)}))})]})};function G(){return!0===Object(r.useContext)(f).loading?Object(c.jsx)("div",{className:"text-center",style:{paddingTop:"100px",paddingRight:"25px"},children:Object(c.jsx)("i",{className:"fa fa-spinner fa-pulse fa-3x "})}):Object(c.jsx)(n.a.Fragment,{children:Object(c.jsxs)("div",{className:"row mt-4",children:[Object(c.jsx)("div",{className:"col-md-4",children:Object(c.jsx)(B,{})}),Object(c.jsxs)("div",{className:"col-md-8 mt-4 text-center mb-5",children:[Object(c.jsx)(R,{}),Object(c.jsx)("div",{className:"mt-5",children:Object(c.jsx)(L,{})})]})]})})}var z=function(){return Object(r.useEffect)((function(){localStorage.removeItem("token"),localStorage.removeItem("check"),localStorage.removeItem("uId"),window.location="/"})),null},V=a(18),U=a(28),J=a(17),$=J.a().shape({email:J.b().required().email()});function Q(){var e,t=Object(r.useState)(!1),a=Object(m.a)(t,2),n=a[0],s=a[1],i=Object(V.b)({resolver:Object(U.yupResolver)($)}),l=i.register,o=i.handleSubmit,j=i.errors,b=Object(r.useState)(""),h=Object(m.a)(b,2),O=h[0],p=h[1],x=Object(r.useState)(""),f=Object(m.a)(x,2),v=f[0],g=f[1],N=function(){var e=Object(u.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(!0),e.next=4,C.a.post("https://book-shop-2021.herokuapp.com/users/forget",t);case 4:(a=e.sent)&&200===a.status&&(p(a.data),s(!1)),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),s(!1),e.t0.response&&400===e.t0.response.status&&g(e.t0.response.data);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(c.jsx)("div",{className:"row mt-5",children:Object(c.jsx)("div",{className:"col-md-6 mx-auto",children:Object(c.jsxs)("div",{className:"card card-body",children:[O&&Object(c.jsx)("div",{className:"alert alert-success",children:O}),v&&Object(c.jsx)("div",{className:"alert alert-danger",children:v}),Object(c.jsx)("h2",{className:"text-center text-primary",children:"Forget Password"}),Object(c.jsx)("h6",{className:"mt-3 text-center",children:"Please enter your valid Email then you will receive anew mail click on the link on it to rest your password"}),Object(c.jsxs)("form",{onSubmit:o(N),children:[Object(c.jsx)("input",{type:"text",name:"email",ref:l,placeholder:"Enter your valid email",className:"form-control mt-4"}),Object(c.jsx)("p",{className:"text-danger",children:null===(e=j.email)||void 0===e?void 0:e.message}),Object(c.jsxs)("button",{className:"btn btn-primary",disabled:n,children:[n&&Object(c.jsx)("i",{className:"fa fa-refresh fa-spin"})," Submit"]})]})]})})})}function W(){var e=Object(r.useState)(""),t=Object(m.a)(e,2),a=t[0],s=t[1],i="https://book-shop-2021.herokuapp.com";return Object(r.useEffect)((function(){function e(){return(e=Object(u.a)(d.a.mark((function e(){var t,a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("uId"),e.next=3,T.get(i+"/users/profile/".concat(t));case 3:a=e.sent,c=a.data,s(c);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[i]),Object(c.jsx)(n.a.Fragment,{children:Object(c.jsxs)("div",{className:"row mt-5",children:[Object(c.jsxs)("div",{className:"col-md-4 text-center",children:[a.imageOut&&Object(c.jsxs)("div",{children:[Object(c.jsx)("img",{src:a.image,className:"img-fluid rounded-circle",height:"200",width:"200",alt:a.name}),Object(c.jsx)(p.b,{to:"/profile/edit/image",children:Object(c.jsx)("i",{className:"fa fa-edit text-info",style:{cursor:"pointer",position:"absolute"}})})]}),!a.imageOut&&Object(c.jsxs)("div",{children:[Object(c.jsx)("img",{src:i+"/".concat(a.image),className:"img-fluid rounded-circle",height:"200",width:"200",alt:a.name}),Object(c.jsx)(p.b,{to:"/profile/edit/image",children:Object(c.jsx)("i",{className:"fa fa-edit text-info",style:{cursor:"pointer",position:"absolute"}})})]})]}),Object(c.jsx)("div",{className:"col-md-8 text-center",children:Object(c.jsx)("h3",{children:a.name})})]})})}function H(){var e,t,a,s=Object(r.useContext)(f),i=s.genres,l=s.bookValues,j=Object(r.useState)(l),b=Object(m.a)(j,2),h=b[0],O=b[1],p=Object(r.useState)(""),x=Object(m.a)(p,2),v=x[0],g=x[1],w=Object(r.useState)(""),S=Object(m.a)(w,2),C=S[0],I=S[1],F=Object(r.useState)({}),_=Object(m.a)(F,2),E=_[0],P=_[1],q={title:y.a.string().required().label("Title"),price:y.a.number().required().positive().label("Price"),genreId:y.a.string().required().label("Genre")},D=function(){var e=y.a.validate(h,q,{abortEarly:!1}).error;if(!e)return null;var t,a={},c=Object(k.a)(e.details);try{for(c.s();!(t=c.n()).done;){var r=t.value;a[r.path[0]]=r.message}}catch(n){c.e(n)}finally{c.f()}return a},L=function(e){var t=e.currentTarget,a=Object(o.a)({},E),c=function(e){var t=e.name,a=e.value,c=Object(N.a)({},t,a);q=Object(N.a)({},t,q[t]);var r=y.a.validate(c,q).error;return r?r.details[0].message:null}(t);c?a[t.name]=c:delete a[t.name],P(a);var r=t.name,n=t.value;O(Object(o.a)(Object(o.a)({},h),{},Object(N.a)({},r,n)))},A=function(e){var t=e.currentTarget;g(t.files[0])},B=function(){var e=Object(u.a)(d.a.mark((function e(t){var a,c,r,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=D(),P(a||{}),!a){e.next=4;break}return e.abrupt("return");case 4:return(c=new FormData).append("title",t.title),c.append("price",t.price),c.append("genreId",t.genreId),c.append("image",v),r={Headers:{"Content-Type":"multipart/form-data"}},e.next=12,T.post("https://book-shop-2021.herokuapp.com/books/add",c,r);case 12:(n=e.sent)&&200===n.status&&(I(n.data),setTimeout((function(){window.location.reload()}),2e3));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(e,t,a,r){return Object(c.jsxs)("div",{className:"form-group mb-2",children:[Object(c.jsx)("label",{htmlFor:t,children:a}),Object(c.jsx)("input",{type:e,name:t,value:r,className:"form-control mt-2",onChange:L}),E[t]&&Object(c.jsx)("p",{className:"text-danger",children:E[t]})]})};return Object(c.jsx)(n.a.Fragment,{children:Object(c.jsx)("div",{className:"row mt-5",children:Object(c.jsx)("div",{className:"col-md-8 mx-auto",children:Object(c.jsxs)("div",{className:"card card-body",children:[C&&Object(c.jsx)("div",{className:"alert alert-success",children:C}),Object(c.jsx)("h4",{className:"text-center text-primary",children:"Add New book"}),Object(c.jsxs)("form",{onSubmit:function(e){e.preventDefault(),B(h)},children:[R("text","title","Book Title",h.title),R("text","price","Price",h.price),(e="genreId",t="Category",a=i,Object(c.jsxs)("div",{className:"form-group mt-2",children:[Object(c.jsx)("label",{children:t}),Object(c.jsx)("select",{name:e,onChange:L,className:"form-select mt-2",value:h.genreId,children:a.map((function(e){return Object(c.jsx)("option",{value:e._id,children:e.title},e._id)}))}),E&&Object(c.jsx)("p",{className:"text-danger",children:E[e]})]})),function(e,t){return Object(c.jsxs)("div",{className:"form-group mb-2",children:[Object(c.jsx)("label",{htmlFor:e,children:t}),Object(c.jsx)("input",{type:"file",name:e,className:"form-control mt-2",onChange:A}),E[e]&&Object(c.jsx)("p",{className:"text-danger",children:E[e]})]})}("image","Book cover"),Object(c.jsx)("button",{className:"btn btn-primary mt-3",disabled:D(),children:"Submit"})]})]})})})})}function M(){var e=Object(r.useState)(""),t=Object(m.a)(e,2),a=t[0],s=t[1],i=Object(r.useState)(""),l=Object(m.a)(i,2),o=l[0],j=l[1],b="https://book-shop-2021.herokuapp.com",O=Object(h.h)().token;return Object(r.useEffect)((function(){function e(){return(e=Object(u.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.get(b+"/users/confirm/".concat(O));case 3:(t=e.sent)&&200===t.status&&(s(t.data),setTimeout((function(){return window.location="/login"}),4e3)),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),e.t0.response&&401===e.t0.response.status&&(j(e.t0.response.data),setTimeout((function(){return window.location="/checkemail"}),5e3)),e.t0.response&&400===e.t0.response.status&&(j(e.t0.response.data),setTimeout((function(){return window.location="/login"}),4e3));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[O,b]),Object(c.jsx)(n.a.Fragment,{children:Object(c.jsxs)("div",{className:"mt-2",children:[Object(c.jsx)("div",{children:o&&Object(c.jsx)("div",{className:"alert alert-danger",children:o})}),Object(c.jsx)("div",{children:a&&Object(c.jsx)("div",{className:"alert alert-success",children:a})})]})})}function Y(){return Object(c.jsx)(n.a.Fragment,{children:Object(c.jsx)("h1",{className:"text-center m-5",children:"Error 404 !! Page Not Found "})})}var K=J.a().shape({email:J.b().required().email()});function X(){var e,t=Object(r.useState)(!1),a=Object(m.a)(t,2),n=a[0],s=a[1],i=Object(r.useState)(!1),l=Object(m.a)(i,2),o=l[0],j=l[1],b=Object(V.b)({resolver:Object(U.yupResolver)(K)}),h=b.register,O=b.handleSubmit,p=b.errors,x=Object(r.useState)(""),f=Object(m.a)(x,2),v=f[0],g=f[1],N=function(){var e=Object(u.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(!0),e.next=4,T.post("https://book-shop-2021.herokuapp.com/users/token",t);case 4:(a=e.sent)&&200===a.status&&(j(a.data),setTimeout((function(){window.location="/login"}),2e3)),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),s(!1),e.t0.response&&400===e.t0.response.status&&g(e.t0.response.data);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(c.jsx)("div",{className:"row mt-5",children:Object(c.jsx)("div",{className:"col-md-6 mx-auto",children:Object(c.jsxs)("div",{className:"card card-body",children:[v&&Object(c.jsx)("div",{className:"alert alert-danger",children:v}),o&&Object(c.jsx)("div",{className:"alert alert-success",children:o}),Object(c.jsxs)("form",{onSubmit:O(N),children:[Object(c.jsx)("h5",{className:"text-center",children:"Enter Your Valid Email to send new Email Verification"}),Object(c.jsx)("input",{type:"text",name:"email",ref:h,placeholder:"Enter your valid email",className:"form-control"}),Object(c.jsx)("p",{className:"text-danger",children:null===(e=p.email)||void 0===e?void 0:e.message}),Object(c.jsxs)("button",{className:"btn btn-primary ",disabled:n,children:[n&&Object(c.jsx)("i",{className:"fa fa-refresh fa-spin"}),"Send"]})]})]})})})}var Z=J.a().shape({email:J.b().required().email(),password:J.b().required().min(6),password2:J.b().required().min(6)});function ee(){var e,t,a,n=Object(V.b)({resolver:Object(U.yupResolver)(Z)}),s=n.register,i=n.handleSubmit,l=n.errors,o=Object(r.useState)(""),j=Object(m.a)(o,2),b=j[0],h=j[1],O=Object(r.useState)(""),p=Object(m.a)(O,2),x=p[0],f=p[1],v=function(){var e=Object(u.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.post("https://book-shop-2021.herokuapp.com/users/assign",t);case 3:(a=e.sent)&&200===a.status&&(f(a.data),setTimeout((function(){return window.location="/login"}),4e3)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),e.t0.response&&400===e.t0.response.status&&h(e.t0.response.data);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(c.jsx)("div",{className:"row mt-5",children:Object(c.jsx)("div",{className:"col-md-6 mx-auto",children:Object(c.jsxs)("div",{className:"card card-body",children:[b&&Object(c.jsx)("div",{className:"alert alert-danger",children:b}),x&&Object(c.jsx)("div",{className:"alert alert-success",children:x}),Object(c.jsx)("h2",{className:"text-center text-primary",children:"Re-assign Password"}),Object(c.jsxs)("form",{onSubmit:i(v),children:[Object(c.jsx)("input",{type:"text",name:"email",ref:s,placeholder:"Enter your email again",className:"form-control"}),Object(c.jsx)("p",{className:"text-danger",children:null===(e=l.email)||void 0===e?void 0:e.message}),Object(c.jsx)("input",{type:"password",name:"password",ref:s,placeholder:"Enter Password",className:"form-control"}),Object(c.jsx)("p",{className:"text-danger",children:null===(t=l.password)||void 0===t?void 0:t.message}),Object(c.jsx)("input",{type:"password",name:"password2",ref:s,placeholder:"Re-enter Password",className:"form-control"}),Object(c.jsx)("p",{className:"text-danger",children:null===(a=l.password2)||void 0===a?void 0:a.message}),Object(c.jsx)("button",{className:"btn btn-primary ",children:"Confirm"})]})]})})})}function te(){var e=Object(r.useState)(""),t=Object(m.a)(e,2),a=t[0],s=t[1],i=Object(r.useState)(""),l=Object(m.a)(i,2),o=l[0],j=l[1],b="https://book-shop-2021.herokuapp.com",O=Object(h.h)().token;return Object(r.useEffect)((function(){function e(){return(e=Object(u.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.get(b+"/users/forget/".concat(O));case 3:(t=e.sent)&&200===t.status&&(s(t.data),setTimeout((function(){return window.location="/assign-password"}),4e3)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),e.t0.response&&400===e.t0.response.status&&(j(e.t0.response.data),setTimeout((function(){return window.location="/forget"}),5e3));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[O,b]),Object(c.jsx)(n.a.Fragment,{children:Object(c.jsxs)("div",{className:"mt-2",children:[Object(c.jsx)("div",{children:o&&Object(c.jsx)("div",{className:"alert alert-danger",children:o})}),Object(c.jsx)("div",{children:a&&Object(c.jsx)("div",{className:"alert alert-success",children:a})})]})})}function ae(){var e=Object(r.useState)(""),t=Object(m.a)(e,2),a=t[0],n=t[1],s=Object(r.useState)(""),i=Object(m.a)(s,2),l=i[0],o=i[1],j=Object(r.useState)(!0),b=Object(m.a)(j,2),h=b[0],O=b[1],p=Object(V.b)().handleSubmit,x=function(){var e=Object(u.a)(d.a.mark((function e(){var t,c,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new FormData).append("image",a),c=localStorage.getItem("uId"),e.next=5,T.put("https://book-shop-2021.herokuapp.com"+"/users/profile/image/".concat(c),t);case 5:(r=e.sent)&&200===r.status&&o(r.data),setTimeout((function(){window.location="/profile"}),2e3);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.jsx)("div",{children:Object(c.jsx)("div",{className:"row mt-5",children:Object(c.jsx)("div",{className:"col-md-7 mx-auto",children:Object(c.jsxs)("div",{className:"card card-body",children:[l&&Object(c.jsx)("div",{className:"alert alert-success",children:l}),Object(c.jsx)("h3",{className:"text-center",children:"Edit Profile Image"}),Object(c.jsxs)("form",{onSubmit:p(x),children:[Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"image",children:"Upload image"}),Object(c.jsx)("input",{type:"file",name:"image",id:"image",onChange:function(e){n(e.target.files[0]),O(!1)},className:"form-control"})]}),Object(c.jsx)("button",{className:"btn btn-primary mt-2",disabled:h,children:"Upload"})]})]})})})})}function ce(){var e=Object(r.useState)([]),t=Object(m.a)(e,2),a=t[0],s=t[1],i="https://book-shop-2021.herokuapp.com",l=Object(r.useContext)(f).addToCart,o=Object(h.h)().bookId;return Object(r.useEffect)((function(){function e(){return(e=Object(u.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.get(i+"/books/".concat(o));case 2:t=e.sent,a=t.data,s(a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[o,i]),Object(c.jsx)(n.a.Fragment,{children:a.map((function(e){return Object(c.jsxs)("div",{className:"row mt-4",children:[Object(c.jsx)("div",{className:"col-md-4 mb-2",children:Object(c.jsx)("div",{className:"text-center ",children:Object(c.jsx)("img",{src:i+"/".concat(e.image),alt:e.title,width:"250",height:"250"})})}),Object(c.jsx)("div",{className:"col-md-8 ",children:Object(c.jsxs)("div",{className:"",children:[Object(c.jsx)("h1",{children:e.title}),Object(c.jsxs)("h3",{children:["$ ",e.price]}),Object(c.jsxs)(p.b,{to:"/categories/".concat(e.genre.title),children:[" ",Object(c.jsx)("h5",{children:e.genre.title})," "]}),Object(c.jsxs)("button",{className:"btn btn-primary m-2",onClick:function(){return l(e)},children:[Object(c.jsx)("i",{className:"fa fa-shopping-cart"})," Add to Cart"]})]})})]},e._id)}))})}function re(){var e=Object(r.useContext)(f),t=e.cart,a=e.cartFromLocalStorage,s=e.getTotalPrice,i=e.deleteCartItem,l=e.handleIncrement,o=e.handleDecrement,j=e.clearAllCartItems;return Object(c.jsx)(n.a.Fragment,{children:Object(c.jsx)("div",{className:"row",children:Object(c.jsx)("div",{className:"col-md-8 mx-auto",children:Object(c.jsxs)("table",{className:"table mt-4",children:[Object(c.jsx)("thead",{className:"text-center",children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{scope:"col",children:"Item"}),Object(c.jsx)("th",{scope:"col",children:" "}),Object(c.jsx)("th",{scope:"col",children:"Qty"}),Object(c.jsx)("th",{scope:"col",children:"price"}),Object(c.jsx)("th",{scope:"col",children:" "})]})}),Object(c.jsxs)("tbody",{className:"text-center",children:[a.map((function(e){return Object(c.jsxs)("tr",{className:"align-middle",children:[Object(c.jsx)("th",{children:Object(c.jsx)("img",{src:"https://book-shop-2021.herokuapp.com"+"/".concat(e.image),alt:e.title,width:"100",height:"100"})}),Object(c.jsx)("td",{children:Object(c.jsx)("h5",{children:e.title})}),Object(c.jsx)("td",{children:Object(c.jsxs)("div",{className:"d-flex align-items-center ",children:[Object(c.jsx)("button",{className:"btn btn-primary btn-sm",onClick:function(){return o(e)},disabled:1===e.quantity,children:"-"}),Object(c.jsx)("span",{className:"badge text-secondary ",style:{fontSize:"18px"},children:e.quantity}),Object(c.jsx)("button",{className:"btn btn-primary btn-sm",onClick:function(){return l(e)},children:"+"})]})}),Object(c.jsx)("td",{children:e.price}),Object(c.jsx)("td",{children:Object(c.jsx)("button",{className:"btn btn-danger",onClick:function(){return i(e)},children:Object(c.jsx)("i",{className:"fa fa-trash"})})})]},e._id)})),Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{}),Object(c.jsxs)("td",{children:[Object(c.jsxs)("h4",{className:"text-primary",children:["Total Price $",s()]})," "]}),Object(c.jsx)("td",{children:t.length>=1&&Object(c.jsx)("button",{className:"btn btn-danger btn-sm",onClick:j,children:"Empty Cart "})})]})]})]})})})})}var ne="https://book-shop-2021.herokuapp.com",se=function(){var e=Object(r.useContext)(f).searchQuery,t=Object(r.useState)([]),a=Object(m.a)(t,2),s=a[0],i=a[1],l=Object(r.useState)(!0),o=Object(m.a)(l,2),j=o[0],b=o[1],O=s;e&&(O=s.filter((function(t){return t.title.toLowerCase().startsWith(e.toLowerCase())})));var x=Object(h.h)().genreTitle;return Object(r.useEffect)((function(){setTimeout((function(){function e(){return(e=Object(u.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.get(ne+"/books/genre/".concat(x));case 2:t=e.sent,a=t.data,i(a),b(!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}))}),[x]),Object(c.jsxs)(n.a.Fragment,{children:[j&&Object(c.jsx)("div",{className:"text-center",style:{paddingTop:"100px"},children:Object(c.jsx)("i",{className:"fa fa-spinner fa-pulse fa-3x ",children:j})}),Object(c.jsx)("div",{className:"row",children:Object(c.jsx)("div",{className:"col-md-8 mx-auto",children:Object(c.jsx)("div",{className:"row",children:O.map((function(e){return Object(c.jsx)("div",{className:"col-md-4",children:Object(c.jsx)("div",{className:"card card-body mt-2 border-white",style:{height:"200"},children:Object(c.jsx)(p.b,{to:"/books/".concat(e.title.replace(/\s+/g,"-").toLowerCase(),"/").concat(e._id),children:Object(c.jsx)("img",{src:ne+"/".concat(e.image),alt:e.title,height:"200",width:"200",style:{cursor:"pointer"}})})})},e._id)}))})})})]})},ie=function(){var e,t,a,s=Object(r.useState)({title:""}),i=Object(m.a)(s,2),l=i[0],j=i[1],b=Object(r.useState)(""),h=Object(m.a)(b,2),O=h[0],p=h[1],x=Object(r.useState)({}),f=Object(m.a)(x,2),v=f[0],g=f[1],w={title:y.a.string().required().min(3).label("Title")},S=function(){var e=y.a.validate(l,w,{abortEarly:!1}).error;if(!e)return null;var t,a={},c=Object(k.a)(e.details);try{for(c.s();!(t=c.n()).done;){var r=t.value;a[r.path[0]]=r.message}}catch(n){c.e(n)}finally{c.f()}return a},C=function(e){var t=e.currentTarget,a=Object(o.a)({},v),c=function(e){var t=e.name,a=e.value,c=Object(N.a)({},t,a);w=Object(N.a)({},t,w[t]);var r=y.a.validate(c,w).error;return r?r.details[0].message:null}(t);c?a[t.name]=c:delete a[t.name],g(a);var r=t.name,n=t.value;j(Object(o.a)(Object(o.a)({},l),{},Object(N.a)({},r,n)))},I=function(){var e=Object(u.a)(d.a.mark((function e(t){var a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=S(),g(a||{}),!a){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,T.post("https://book-shop-2021.herokuapp.com/genres",t);case 6:(c=e.sent)&&200===c.status&&(p(c.data),setTimeout((function(){window.location.reload()}),2e3));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.jsx)(n.a.Fragment,{children:Object(c.jsx)("div",{className:"row mt-5",children:Object(c.jsx)("div",{className:"col-md-7 mx-auto",children:Object(c.jsxs)("div",{className:"card card-body",children:[O&&Object(c.jsx)("div",{className:"alert alert-success",children:O}),Object(c.jsx)("h3",{className:"text-center text-primary",children:"Add New Genre"}),Object(c.jsxs)("form",{onSubmit:function(e){e.preventDefault(I(l))},children:[(e="title",t="Title",a=l.title,Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:e,children:t}),Object(c.jsx)("input",{type:"text",name:e,value:a,className:"form-control",onChange:C}),v[e]&&Object(c.jsx)("p",{className:"text-danger",children:v[e]})]})),Object(c.jsx)("button",{className:"btn btn-primary mt-3",disabled:S(),children:"Submit"})]})]})})})})},le=function(){var e=Object(r.useState)(""),t=Object(m.a)(e,2),a=t[0],s=t[1],i=Object(r.useContext)(f),l=i.pageSize,o=i.loading,j=i.currentPage,b=A(i.filtering,j,l),h="https://book-shop-2021.herokuapp.com",O=function(){var e=Object(u.a)(d.a.mark((function e(t){var a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure to delete this book ?")){e.next=8;break}return a=t._id,e.next=4,T.delete(h+"/books/".concat(a));case 4:(c=e.sent)&&200===c.status&&(s(c.data),setTimeout((function(){window.location="/booklists"}),2e3)),e.next=9;break;case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return!0===o?Object(c.jsx)("div",{className:"text-center",style:{paddingTop:"100px",paddingRight:"25px"},children:Object(c.jsx)("i",{className:"fa fa-spinner fa-pulse fa-3x "})}):Object(c.jsx)(n.a.Fragment,{children:Object(c.jsxs)("div",{className:"row mt-5 mb-2",children:[Object(c.jsx)("div",{className:"col-md-3",children:Object(c.jsx)(B,{})}),a&&Object(c.jsx)("div",{className:"alert alert-danger",children:a}),0===b.length&&Object(c.jsx)("h3",{className:"text-center text-danger",children:"Sorry No much Results found "}),Object(c.jsxs)("div",{className:"col-md-9 text-center",children:[Object(c.jsx)("div",{className:"row ",children:b.map((function(e){return Object(c.jsx)("div",{className:"col-md-4 ",children:Object(c.jsxs)("div",{className:"card mt-2 ",style:{width:"250px"},children:[Object(c.jsx)("div",{className:"card-img-top text-center",children:Object(c.jsx)("img",{src:h+"/".concat(e.image),alt:e.title,width:"248px",height:"200px"})}),Object(c.jsx)("div",{className:"card-body",children:Object(c.jsxs)("ul",{className:"list-group list-group-flush",children:[Object(c.jsx)("li",{className:"list-group-item",children:e.title}),Object(c.jsxs)("li",{className:"list-group-item",children:["$ ",e.price]})]})}),Object(c.jsxs)("div",{className:"card-footer ",children:[Object(c.jsx)(p.b,{to:"/books/view/".concat(e.title.replace(/\s+/g,"-").toLowerCase(),"/").concat(e._id),className:"btn btn-primary btn-sm m-2",children:"View Book"}),Object(c.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(){return O(e)},children:"Delete Book"})]})]})},e._id)}))}),Object(c.jsx)(L,{})]})]})})},oe=function(){var e,t,a,s=Object(r.useContext)(f),i=s.bookValues,l=Object(r.useState)(i),j=Object(m.a)(l,2),b=j[0],O=j[1],p=Object(r.useState)({}),x=Object(m.a)(p,2),v=x[0],g=x[1],w=s.genres,S=Object(r.useState)(""),C=Object(m.a)(S,2),I=C[0],F=C[1],_=Object(h.h)()._id,E={title:y.a.string().required().label("Title"),price:y.a.number().required().positive().label("Price"),genreId:y.a.string().required().label("Genre")},P=function(){var e=y.a.validate(b,E,{abortEarly:!1}).error;if(!e)return null;var t,a={},c=Object(k.a)(e.details);try{for(c.s();!(t=c.n()).done;){var r=t.value;a[r.path[0]]=r.message}}catch(n){c.e(n)}finally{c.f()}return a},q=function(e){var t=e.currentTarget,a=Object(o.a)({},v),c=function(e){var t=e.name,a=e.value,c=Object(N.a)({},t,a);E=Object(N.a)({},t,E[t]);var r=y.a.validate(c,E).error;return r?r.details[0].message:null}(t);c?a[t.name]=c:delete a[t.name],g(a);var r=t.name,n=t.value;O(Object(o.a)(Object(o.a)({},b),{},Object(N.a)({},r,n)))},D=function(){var e=Object(u.a)(d.a.mark((function e(t){var a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=P(),g(a||{}),!a){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,T.put("https://book-shop-2021.herokuapp.com"+"/books/".concat(_),t);case 6:(c=e.sent)&&200===c.status&&(F(c.data),setTimeout((function(){window.location="/booklists"}),1e3));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(e,t,a,r){return Object(c.jsxs)("div",{className:"form-group mb-2",children:[Object(c.jsx)("label",{htmlFor:t,children:a}),Object(c.jsx)("input",{type:e,name:t,defaultValue:r,className:"form-control mt-2",onChange:q}),v[t]&&Object(c.jsx)("p",{className:"text-danger",children:v[t]})]})};return Object(c.jsx)(n.a.Fragment,{children:Object(c.jsx)("div",{className:"row mt-5",children:Object(c.jsx)("div",{className:"col-md-8 mx-auto",children:Object(c.jsxs)("div",{className:"card card-body",children:[I&&Object(c.jsx)("div",{className:"alert alert-success",children:I}),Object(c.jsx)("h4",{className:"text-center text-primary",children:"Update book"}),Object(c.jsxs)("form",{onSubmit:function(e){e.preventDefault(),D(b)},children:[L("text","title","Book Title",b.title),L("text","price","Price",b.price),(e="genreId",t="Category",a=w,Object(c.jsxs)("div",{className:"form-group mt-2",children:[Object(c.jsx)("label",{children:t}),Object(c.jsx)("select",{name:e,onChange:q,className:"form-select mt-2",value:b.genreId,children:a.map((function(e){return Object(c.jsx)("option",{value:e._id,children:e.title},e._id)}))}),v&&Object(c.jsx)("p",{className:"text-danger",children:v[e]})]})),Object(c.jsx)("button",{className:"btn btn-primary mt-3",disabled:P(),children:"Update"})]})]})})})})},je=function(){var e=Object(r.useState)([]),t=Object(m.a)(e,2),a=t[0],s=t[1],i="https://book-shop-2021.herokuapp.com",l=Object(r.useContext)(f).handleEditData,o=Object(h.h)().bookId;return Object(r.useEffect)((function(){function e(){return(e=Object(u.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.get(i+"/books/".concat(o));case 2:t=e.sent,a=t.data,s(a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[o,i]),Object(c.jsx)(n.a.Fragment,{children:a.map((function(e){return Object(c.jsxs)("div",{className:"row mt-5",children:[Object(c.jsx)("div",{className:"col-md-4 mb-2",children:Object(c.jsxs)("div",{className:"text-center ",children:[Object(c.jsx)("img",{src:i+"/".concat(e.image),alt:e.title,width:"250",height:"250"}),Object(c.jsx)(p.b,{to:"/books/edit-image/".concat(e._id),children:Object(c.jsx)("i",{className:"fa fa-pencil  text-primary",style:{position:"absolute",top:"95px",fontSize:"20px"},role:"button"})})]})}),Object(c.jsx)("div",{className:"col-md-8 ",children:Object(c.jsxs)("div",{className:"card card-body",style:{border:"white"},children:[Object(c.jsx)(p.b,{to:"/books/edit/".concat(e._id),children:Object(c.jsx)("i",{className:"fa fa-pencil  text-primary",style:{position:"absolute",top:"15px",right:"70px",fontSize:"20px"},role:"button",onClick:function(){return l(e)}})}),Object(c.jsx)("h1",{children:e.title}),Object(c.jsxs)("h3",{children:["$ ",e.price]}),Object(c.jsx)("h5",{children:e.genre.title})]})})]},e._id)}))})},de=function(){var e=Object(r.useState)(""),t=Object(m.a)(e,2),a=t[0],s=t[1],i=Object(r.useState)(""),l=Object(m.a)(i,2),o=l[0],j=l[1],b=Object(h.h)()._id,O=function(){var e=Object(u.a)(d.a.mark((function e(){var t,c,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new FormData).append("image",a),c={Headers:{"Content-Type":"multipart/form-data"}},e.next=5,T.put("https://book-shop-2021.herokuapp.com"+"/books/bookImage/".concat(b),t,c);case 5:(r=e.sent)&&200===r.status&&j(r.data),setTimeout((function(){window.location="/booklists"}),2e3);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.jsx)(n.a.Fragment,{children:Object(c.jsx)("div",{className:"row mt-5",children:Object(c.jsx)("div",{className:"col-md-7 mx-auto",children:Object(c.jsxs)("div",{className:"card card-body",children:[o&&Object(c.jsx)("div",{className:"alert alert-success",children:o}),Object(c.jsx)("h3",{className:"text-center",children:"Edit Book Image"}),Object(c.jsxs)("form",{onSubmit:function(e){e.preventDefault(),O()},children:[Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"image",children:"Upload image"}),Object(c.jsx)("input",{type:"file",name:"image",id:"image",onChange:function(e){s(e.target.files[0])},className:"form-control"})]}),Object(c.jsx)("button",{className:"btn btn-primary mt-2",children:"Upload"})]})]})})})})};function be(){var e=JSON.parse(localStorage.getItem("cart")||"[]"),t=Object(r.useState)(""),a=Object(m.a)(t,2),s=a[0],i=a[1],l=Object(r.useState)([]),j=Object(m.a)(l,2),p=j[0],x=j[1],v=Object(r.useState)([]),N=Object(m.a)(v,2),k=N[0],w=N[1],y=Object(r.useState)({title:"",price:"",genreId:""}),S=Object(m.a)(y,2),C=S[0],I=S[1],F=Object(r.useState)(""),_=Object(m.a)(F,2),q=_[0],D=_[1],L=Object(r.useState)(1),A=Object(m.a)(L,2),B=A[0],R=A[1],V=Object(r.useState)(null),U=Object(m.a)(V,2),J=U[0],$=U[1],K=Object(r.useState)(e),Z=Object(m.a)(K,2),ne=Z[0],be=Z[1],he="https://book-shop-2021.herokuapp.com",Oe=Object(r.useState)(!0),pe=Object(m.a)(Oe,2),xe=pe[0],fe=pe[1],ve=k;q?ve=k.filter((function(e){return e.title.toLowerCase().startsWith(q.toLowerCase())})):J&&J._id&&(ve=k.filter((function(e){return e.genre._id===J._id}))),Object(r.useEffect)((function(){setTimeout((function(){try{(function(){var e=Object(u.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.get(he+"/genres");case 2:t=e.sent,a=t.data,x([{_id:"",title:"All Books"}].concat(Object(b.a)(a)));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()(),function(){var e=Object(u.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.get(he+"/books");case 2:t=e.sent,a=t.data,w(a),fe(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),localStorage.setItem("cart",JSON.stringify(ne));var e=localStorage.getItem("token"),t=Object(O.a)(e);i(t)}catch(a){return null}}),1e3)}),[ne,he]);return Object(c.jsx)(n.a.Fragment,{children:Object(c.jsxs)(f.Provider,{value:{user:s,genres:p,pageSize:6,cart:ne,currentPage:B,onPageChange:function(e){R(e)},handleGenreSelect:function(e){D(""),$(e),R(1)},handleSearch:function(e){D(e),$(null),R(1)},searchQuery:q,selectedGenre:J,filtering:ve,addToCart:function(e){var t=Object(b.a)(ne),a=t.find((function(t){return e._id===t._id}));a?a.quantity++:(a=Object(o.a)(Object(o.a)({},e),{},{quantity:1}),t.push(a)),be(t)},cartFromLocalStorage:e,getCartTotal:function(){return ne.reduce((function(e,t){return e+t.quantity}),0)},getTotalPrice:function(){return ne.reduce((function(e,t){var a=t.price;return e+t.quantity*a}),0)},deleteCartItem:function(e){var t=Object(b.a)(ne);t=t.filter((function(t){return e._id!==t._id})),be(t)},handleIncrement:function(e){var t=Object(b.a)(ne),a=t.find((function(t){return t._id===e._id}));a&&a.quantity++,be(t)},handleDecrement:function(e){var t=Object(b.a)(ne),a=t.find((function(t){return t._id===e._id}));a&&a.quantity--,be(t)},clearAllCartItems:function(){be([])},handleEditData:function(e){I({title:e.title,price:e.price,genreId:e.genre._id})},bookValues:C,loading:xe},children:[Object(c.jsx)(g,{}),Object(c.jsx)("div",{style:{maxWidth:"80%",margin:"0 auto",marginTop:"0px",display:"block",paddingTop:"70px"},children:Object(c.jsxs)(h.d,{children:[Object(c.jsx)(me,{path:"/books/add",children:Object(c.jsx)(H,{})}),Object(c.jsx)(me,{path:"/genre/add",children:Object(c.jsx)(ie,{})}),Object(c.jsx)(me,{path:"/books/edit/:_id",children:Object(c.jsx)(oe,{})}),Object(c.jsx)(me,{path:"/books/edit-image/:_id",children:Object(c.jsx)(de,{})}),Object(c.jsx)(me,{path:"/books/view/:bookTitle/:bookId",children:Object(c.jsx)(je,{})}),Object(c.jsx)(me,{path:"/booklists",children:Object(c.jsx)(le,{})}),Object(c.jsx)(ue,{path:"/profile/edit/image",children:Object(c.jsx)(ae,{})}),Object(c.jsx)(ue,{path:"/profile",children:Object(c.jsx)(W,{})}),Object(c.jsx)(h.b,{path:"/login",children:Object(c.jsx)(E,{})}),Object(c.jsx)(h.b,{path:"/cart",children:Object(c.jsx)(re,{})}),Object(c.jsx)(h.b,{path:"/register",children:Object(c.jsx)(P,{})}),Object(c.jsx)(h.b,{path:"/forget",children:Object(c.jsx)(Q,{})}),Object(c.jsx)(h.b,{path:"/checkemail",children:Object(c.jsx)(X,{})}),Object(c.jsx)(h.b,{path:"/assign-password",children:Object(c.jsx)(ee,{})}),Object(c.jsx)(h.b,{path:"/users/confirm/:token",children:Object(c.jsx)(M,{})}),Object(c.jsx)(h.b,{path:"/users/forget/:token",children:Object(c.jsx)(te,{})}),Object(c.jsx)(h.b,{path:"/books/:bookTitle/:bookId/",children:Object(c.jsx)(ce,{})}),Object(c.jsx)(h.b,{path:"/categories/:genreTitle",children:Object(c.jsx)(se,{})}),Object(c.jsx)(h.b,{path:"/logout",children:Object(c.jsx)(z,{})}),Object(c.jsx)(h.b,{path:"/",exact:!0,children:Object(c.jsx)(G,{})}),Object(c.jsx)(h.b,{path:"/not-found",children:Object(c.jsx)(Y,{})}),Object(c.jsx)(h.a,{to:"/not-found"})]})})]})})}var ue=function(e){var t=e.children,a=Object(l.a)(e,["children"]),r=localStorage.getItem("token");return Object(c.jsx)(h.b,Object(o.a)(Object(o.a)({},a),{},{render:function(e){var a=e.location;return r?t:Object(c.jsx)(h.a,{to:{pathname:"/login",state:{from:a}}})}}))},me=function(e){var t=e.children,a=Object(l.a)(e,["children"]);!0===Object(r.useContext)(f).user.isAdmin&&localStorage.setItem("check",!0);var n=localStorage.getItem("check");return Object(c.jsx)(h.b,Object(o.a)(Object(o.a)({},a),{},{render:function(e){var a=e.location;return n?t:Object(c.jsx)(h.a,{to:{pathname:"/not-found",state:{from:a}}})}}))},he=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,222)).then((function(t){var a=t.getCLS,c=t.getFID,r=t.getFCP,n=t.getLCP,s=t.getTTFB;a(e),c(e),r(e),n(e),s(e)}))};i.a.render(Object(c.jsx)(n.a.StrictMode,{children:Object(c.jsx)(p.a,{children:Object(c.jsx)(be,{})})}),document.getElementById("root")),he()},98:function(e,t,a){}},[[221,1,2]]]);
//# sourceMappingURL=main.4b4768e9.chunk.js.map